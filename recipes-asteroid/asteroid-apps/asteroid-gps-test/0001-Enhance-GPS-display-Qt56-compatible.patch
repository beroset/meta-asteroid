From 0000000000000000000000000000000000000000 Mon Sep 17 00:00:00 2001
From: AsteroidOS <dev@asteroidos.org>
Date: Fri, 31 Jan 2026 20:00:00 +0000
Subject: [PATCH] Enhance GPS display with detailed positioning info

Improves the GPS test application to show more detailed position
information including accuracy, validity status, and timestamps.
Works with Qt 5.6 (QtPositioning 5.2).

Note: SatelliteSource is NOT available in Qt 5.6 (requires Qt 5.14+).
This patch uses only PositionSource which is available in Qt 5.6.

Also adds DisplayBlanking from Nemo.KeepAlive to prevent screen blanking
during GPS testing.
---
 src/main.qml | 82 +++++++++++++++++++++++++++++++++++++++++++--------
 1 file changed, 70 insertions(+), 12 deletions(-)

diff --git a/src/main.qml b/src/main.qml
index 1111111..2222222 100644
--- a/src/main.qml
+++ b/src/main.qml
@@ -17,30 +17,88 @@
 
 import QtQuick 2.9
 import QtPositioning 5.2
+import Nemo.KeepAlive 1.1
 import org.asteroid.controls 1.0
 
 Application {
     id: app
 
     centerColor: "#b04d1c"
-    outerColor: "#421c0a"
+    outerColor: "#621c0a"
 
-    Label {
-        id: positionText
-        anchors.centerIn: parent
-        horizontalAlignment: Text.AlignHCenter
+    Column {
+        anchors.fill: parent
+        spacing: 2
+
+        Label {
+            height: parent.height * 0.15
+            width: parent.width
+            text: "GPS Test"
+            horizontalAlignment: Text.AlignHCenter
+            verticalAlignment: Text.AlignVCenter
+            font.pixelSize: 20
+        }
+
+        Label {
+            height: parent.height * 0.12
+            width: parent.width
+            text: src.valid ? "GPS Active" : "Searching..."
+            horizontalAlignment: Text.AlignHCenter
+            verticalAlignment: Text.AlignVCenter
+            color: src.valid ? "#00ff00" : "#ffaa00"
+        }
+
+        Label {
+            id: latitude
+            height: parent.height * 0.15
+            width: parent.width
+            text: "Lat: --"
+            horizontalAlignment: Text.AlignHCenter
+            verticalAlignment: Text.AlignVCenter
+        }
+
+        Label {
+            id: longitude
+            height: parent.height * 0.15
+            width: parent.width
+            text: "Lon: --"
+            horizontalAlignment: Text.AlignHCenter
+            verticalAlignment: Text.AlignVCenter
+        }
+
+        Label {
+            id: accuracy
+            height: parent.height * 0.12
+            width: parent.width
+            text: "Accuracy: --"
+            horizontalAlignment: Text.AlignHCenter
+            verticalAlignment: Text.AlignVCenter
+        }
+
+        Label {
+            id: timestamp
+            height: parent.height * 0.18
+            width: parent.width
+            text: "--"
+            horizontalAlignment: Text.AlignHCenter
+            verticalAlignment: Text.AlignVCenter
+            wrapMode: Text.WordWrap
+        }
     }
 
     PositionSource {
         id: src
         updateInterval: 1000
-        active: true
+        active: false
         preferredPositioningMethods: PositionSource.SatellitePositioningMethods
 
         onPositionChanged: {
-            var coord = src.position.coordinate;
-            positionText.text = "Coordinate:\n" + coord.longitude + " - " + coord.latitude;
+            var coord = position.coordinate
+            latitude.text = "Lat: " + coord.latitude.toFixed(6)
+            longitude.text = "Lon: " + coord.longitude.toFixed(6)
+            accuracy.text = "Accuracy: " + position.horizontalAccuracy.toFixed(1) + "m"
+            if (position.timestamp)
+                timestamp.text = position.timestamp.toString()
         }
     }
+
+    Component.onCompleted: {
+        DisplayBlanking.preventBlanking = true
+        src.active = true
+    }
 }
-- 
2.34.1
